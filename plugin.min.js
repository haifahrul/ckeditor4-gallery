window.console||(console={log:function(){}}),Array.prototype.forEach||(Array.prototype.forEach=function(e,l){"use strict";var a,t;for(a=0,t=this.length;a<t;++a)a in this&&e.call(l,this[a],a,this)}),CKEDITOR.plugins.add("gallery",{requires:"contextmenu,fakeobjects",lang:"en,id",getGalleryDialogCss:function(){return"img.cke_gallery{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;background-color:Azure;border: 1px solid #a9a9a9;width: 100px;height:100px;margin: 5px;}"},icons:"gallery",onLoad:function(){CKEDITOR.addCss&&CKEDITOR.addCss(this.getGalleryDialogCss())},init:function(e){var l=e.lang.gallery;void 0!==e.element.data?(allowed="",allowed+=" html head title; style [media,type]; body (*)[id]; meta link [*]",allowed+="; img[*]{*}(*)",allowed+="; div[*]{*}(*)",allowed+="; script[*]{*}(*)",allowed+="; ul[*]{*}(*)",allowed+="; li[*]{*}(*)",e.addCommand("gallery",new CKEDITOR.dialogCommand("galleryDialog",{allowedContent:allowed,requires:["fakeobjects"]})),e.ui.addButton("Gallery",{label:l.insertGallery,command:"gallery",toolbar:"insert",icon:this.path+"icons/slider.svg"}),e.on("load",function(e){}),e.on("doubleclick",function(e){var l=e.data.element;l.is("img")&&"gallery"==l.data("cke-real-element-type")&&(e.data.dialog="galleryDialog")}),e.on("instanceReady",function(){}),e.contextMenu&&(e.addMenuGroup("galleryGroup"),e.addMenuItem("galleryItem",{label:l.editGallery,icon:this.path+"icons/slider.svg",command:"gallery",group:"galleryGroup"}),e.contextMenu.addListener(function(l,a){return l&&l.is("img")&&!l.isReadOnly()&&"gallery"==l.data("cke-real-element-type")?(e.contextMenu.removeAll(),{galleryItem:CKEDITOR.TRISTATE_OFF}):null})),CKEDITOR.dialog.add("galleryDialog",this.path+"dialogs/gallery.min.js"),e.addCss&&e.addCss(this.getGalleryDialogCss()),CKEDITOR.dtd.$empty["cke:source"]=1,CKEDITOR.dtd.$empty.source=1,e.lang.fakeobjects.gallery=l.fakeObject):alert('The "Gallery" plugin requires CKEditor 3.5 or newer')},afterInit:function(e){var l=e.dataProcessor,a=l&&l.htmlFilter,t=l&&l.dataFilter;t&&t.addRules({elements:{div:function(l){if("galleryPlugin"==l.attributes.class){var a=e.createFakeParserElement(l,"cke_gallery","gallery",!1),t=a.attributes.style||"",r=CKEDITOR.getUrl("plugins/gallery/images/placeholder.png"),i=!1;return Array.prototype.forEach.call(l,function(e){"img"==e.name&&(i||(r=e.attributes.src,i=!0))}),t=a.attributes.style=t+' background-image:url("'+r+'"); ',t=a.attributes.style=t+" background-size:contain; ",t=a.attributes.style=t+" background-repeat:no-repeat; ",t=a.attributes.style=t+" background-position:center; ",t=a.attributes.style=t+" width:64px; ",t=a.attributes.style=t+" height:64px; ",t=a.attributes.style=t+" display:block; ",t=a.attributes.style=t+" border:1px solid black; ",a}}}},{priority:5,applyToAll:!0}),a&&a.addRules({elements:{$:function(e){}}})}}),CKEDITOR.skins&&(en={gallery:en},id={gallery:id});